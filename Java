const rollButton = document.getElementById("roll");
const message = document.getElementById("message");
const player = document.getElementById("player");
const cells = document.querySelectorAll(".cell");

let position = 0; // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ç¾åœ¨ä½ç½®

// åˆæœŸä½ç½®ã«ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’é…ç½®
movePlayer(position);

rollButton.addEventListener("click", () => {
    const dice = Math.floor(Math.random() * 6) + 1; // 1~6ã®ã‚µã‚¤ã‚³ãƒ­
    message.textContent = ã‚µã‚¤ã‚³ãƒ­ã®ç›®ã¯ ${dice}ï¼;

    let nextPosition = position + dice;

    if (nextPosition >= cells.length) {
        nextPosition = cells.length - 1; // ã‚´ãƒ¼ãƒ«ã‚’è¶…ãˆãªã„ã‚ˆã†ã«
    }

    position = nextPosition;
    movePlayer(position);

    const eventText = cells[position].textContent;
    message.textContent += \n${eventText} ã«æ­¢ã¾ã‚Šã¾ã—ãŸï¼;

    if (position === cells.length - 1) {
        message.textContent += "\nğŸ‰ ã‚´ãƒ¼ãƒ«ã—ã¾ã—ãŸï¼ãŠã‚ã§ã¨ã†ï¼ğŸ‰";
        rollButton.disabled = true;
    }
});

function movePlayer(pos) {
    const cell = cells[pos];
    const rect = cell.getBoundingClientRect();
    const boardRect = document.querySelector(".board").getBoundingClientRect();

    // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ä½ç½®ã‚’cellã®ä¸­å¤®ã«è¨­å®š
    player.style.top = ${rect.top - boardRect.top + rect.height / 4}px;
    player.style.left = ${rect.left - boardRect.left + rect.width / 4}px;
}
